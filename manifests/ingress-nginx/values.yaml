---
controller:
  resources:
    requests:
      cpu: 1000m
      memory: 1024Mi
    limits:
      cpu: 2000m
      memory: 2048Mi
  service:
    externalTrafficPolicy: "Local"
    type: NodePort
    nodePorts:
      http: "30080"
      https: "30443"
  # -- Will add custom configuration options to Nginx https://kubernetes.github.io/ingress-nginx/user-guide/nginx-configuration/configmap/
  config:
    # Enables Online Certificate Status Protocol stapling (OCSP) support.
    enable-ocsp: "true"
    # Enables the preload attribute in the HSTS feature.
    hsts-preload: "true"
    # Sets the time during which a client may reuse the session parameters stored in a cache.
    ssl-session-timeout: "1d"
    # Enables TLS 1.3 early data, also known as Zero Round Trip Time Resumption (0-RTT).
    ssl-early-data: "true"
    # Enables compression of HTTP responses using the "gzip" module.
    use-gzip: "true"
    # Sets the timeout between two successive read or write operations on client or proxied server connections.
    proxy-stream-timeout: "0"
    # Limits the time allowed to pass a connection to the next server.
    proxy-stream-next-upstream-timeout: "0"
    # The client IP address will be set based on the use of PROXY protocol or from the X-Forwarded-For header value when use-forwarded-headers is enabled.
    use-forwarded-headers: "true"
    # Append the remote address to the X-Forwarded-For header instead of replacing it.
    compute-full-forwarded-for: "true"
    # Adds an X-Original-Uri header with the original request URI to the backend request.
    proxy-add-original-uri-header: "true"
    # Sets the maximum allowed size of the client request body.
    proxy-body-size: "100m"
    # Sets the status code to return in response to rejected requests.
    limit-req-status-code: "444"
    # Sets the status code to return in response to rejected connections.
    limit-conn-status-code: "444"
    # ===
    # ONLY ACCEPT CLOUDFLARE IP RANGES
    # updated at 2024-09-05
    # ===
    whitelist-source-range:
    - 173.245.48.0/20
    - 103.21.244.0/22
    - 103.22.200.0/22
    - 103.31.4.0/22
    - 141.101.64.0/18
    - 108.162.192.0/18
    - 190.93.240.0/20
    - 188.114.96.0/20
    - 197.234.240.0/22
    - 198.41.128.0/17
    - 162.158.0.0/15
    - 104.16.0.0/13
    - 104.24.0.0/14
    - 172.64.0.0/13
    - 131.0.72.0/22
    - 2400:cb00::/32
    - 2606:4700::/32
    - 2803:f800::/32
    - 2405:b500::/32
    - 2405:8100::/32
    - 2a06:98c0::/29
    - 2c0f:f248::/32
  ingressClassResource:
    default: true
